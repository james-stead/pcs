language: generic

sudo: required

env:
  global:
    - SRC_PATH=/src/pcs
  matrix:
    - DIST=fedora31
    - DIST=fedora32
    - DIST=centos8

services:
  - docker

before_install:
  - docker build
    --build-arg src_path=$SRC_PATH
    -t $DIST
    -f test/$DIST/Dockerfile
    .

script:
  - docker run $DIST make -C $SRC_PATH check
